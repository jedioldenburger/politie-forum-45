# Semantic HTML Structure for Articles

## Overview

As of October 9, 2025, all articles generated by Menu 16 (`start_advanced_rewriting_v2`) now use a comprehensive semantic HTML structure that maximizes SEO, accessibility, and crawler understanding.

## Architecture

### HTML Hierarchy

Every article follows this exact structure:

```html
<article>
  <!-- Navigation (Jump Links) -->
  <nav aria-label="Artikel navigatie" class="article-nav">
    <p><strong>Snelle navigatie:</strong></p>
    <ul>
      <li><a href="#locatie-en-tijd">‚Üí Locatie en Tijd</a></li>
      <li><a href="#hoofdinhoud">‚Üí Hoofdinhoud</a></li>
      <li><a href="#veelgestelde-vragen">‚Üí Veelgestelde Vragen</a></li>
      <li><a href="#reacties">‚Üí Reacties</a></li>
      <li><a href="#trefwoorden">‚Üí Trefwoorden</a></li>
    </ul>
  </nav>

  <!-- 1. Title (handled by Next.js ArticleClient) -->
  <h1>{TITLE}</h1>

  <!-- 2. Location and Time Section -->
  <h2 id="locatie-en-tijd">üìç Locatie en Tijd</h2>
  <p><strong>Locatie:</strong> {location_name} | <strong>Datum:</strong> {timestamp}</p>

  <!-- 3. Summary Section -->
  <h2 id="hoofdinhoud">Samenvatting</h2>
  <p>{summary_paragraph}</p>

  <!-- 4. Main Article Body -->
  <p>{paragraph_1}</p>
  <p>{paragraph_2}</p>
  <h3>{section_subtitle}</h3>
  <p>{paragraph_3}</p>
  <!-- ... more content ... -->

  <!-- 5. FAQ Section (Always 3+ questions) -->
  <h2 id="veelgestelde-vragen">‚ùì Veelgestelde Vragen</h2>
  <h3 id="faq-question-1">Wat gebeurde er precies?</h3>
  <p>{answer_1}</p>
  <h3 id="faq-question-2">Waar vond dit plaats?</h3>
  <p>{answer_2}</p>
  <h3 id="faq-question-3">Wat zijn de gevolgen?</h3>
  <p>{answer_3}</p>

  <!-- 6. Comments Section (placeholder - Next.js CommentThread handles rendering) -->
  <h2 id="reacties">üí¨ Reacties</h2>
  <p><em>Reacties worden hieronder geladen...</em></p>

  <!-- 7. Keywords Section -->
  <h3 id="trefwoorden">üè∑Ô∏è Trefwoorden</h3>
  <ul>
    <li><a href="/tags/politie">Politie</a></li>
    <li><a href="/tags/groningen">Groningen</a></li>
    <li><a href="/tags/rechtspraak">Rechtspraak</a></li>
  </ul>

  <!-- 8. Category Section -->
  <h3 id="categorie">üìÇ Categorie</h3>
  <p><a href="/categorie/misdaad">Misdaad</a></p>
</article>
```

## Implementation Details

### Function: `build_semantic_html_structure()`

Location: `news-rip.py` (lines ~2280-2370)

**Input Parameters:**
- `article_data` (dict): Contains title, summary, full_text, tags, category, timestamp
- `location_data` (dict): Contains name, lat, lng, region
- `faq_data` (list): Array of FAQ objects with question/answer pairs

**Output:**
- Complete semantic HTML string with proper heading hierarchy and internal linking

**Process:**
1. Creates location/time section with geo data
2. Adds summary section if available
3. Preserves article body paragraphs (strips old FAQ sections)
4. Builds FAQ section with anchor IDs for each question
5. Adds comments placeholder (Next.js handles actual rendering)
6. Creates keyword links (internal linking for SEO)
7. Creates category link
8. Prepends navigation menu with jump links

### Integration with Menu 16

The semantic structure is built automatically in the `rewrite_article()` function:

```python
def rewrite_article(article):
    # ... AI rewriting ...

    # Extract location
    temp_location = extract_location_from_article(formatted_body, rewritten_title)

    # Create article data
    article_data = {
        "title": rewritten_title,
        "summary": summary,
        "full_text": formatted_body,  # Raw HTML
        "tags": tags,
        "category": category,
        "faq": faq_data,
        "location": temp_location,
        # ... more fields ...
    }

    # Build semantic HTML structure
    semantic_html = build_semantic_html_structure(article_data, temp_location, faq_data)
    article_data["full_text"] = semantic_html  # Replace with semantic version

    return article_data
```

## SEO Benefits

### 1. Clear Hierarchy
- **One `<h1>` per page** (article title, handled by Next.js)
- **Multiple `<h2>` sections** for major topics
- **`<h3>` subsections** for FAQ questions and metadata

### 2. Internal Linking
- **Tag links** (`/tags/{slug}`) distribute link equity
- **Category links** (`/categorie/{slug}`) strengthen topical clusters
- **Fragment identifiers** (`#locatie-en-tijd`) help crawlers understand sections

### 3. Schema Synergy
Each visible section maps to JSON-LD schemas:
- `<h2>Locatie en Tijd</h2>` ‚Üí `Place` + `GeoCoordinates` schema
- `<h2>Veelgestelde Vragen</h2>` ‚Üí `FAQPage` schema
- `<h2>Reacties</h2>` ‚Üí `DiscussionForumPosting` schema
- `<h3>Trefwoorden</h3>` ‚Üí `keywords` in `NewsArticle`
- `<h3>Categorie</h3>` ‚Üí `articleSection` in `NewsArticle`

### 4. Local SEO
The Location section:
```html
<h2 id="locatie-en-tijd">üìç Locatie en Tijd</h2>
<p><strong>Locatie:</strong> Amsterdam | <strong>Datum:</strong> 2025-10-09 14:32:15</p>
```

- Signals geographic relevance to search engines
- 100+ Dutch cities automatically detected
- Coordinates included in `Place` schema (`contentLocation`)

### 5. Accessibility
- **Semantic HTML** (`<article>`, `<nav>`, `<h1>-<h3>`)
- **ARIA labels** (`aria-label="Artikel navigatie"`)
- **Logical heading sequence** for screen readers
- **Jump links** for keyboard navigation

### 6. Crawl Efficiency
- Fragment identifiers enable `ScrollToAction` in schema
- Clear section boundaries help parsers extract data
- Anchor IDs make content addressable (e.g., `#faq-question-1`)

## Example Output

**Input:** Article about Rotterdam police incident

**Output:**
```html
<nav aria-label="Artikel navigatie" class="article-nav">
  <p><strong>Snelle navigatie:</strong></p>
  <ul>
    <li><a href="#locatie-en-tijd">‚Üí Locatie en Tijd</a></li>
    <li><a href="#hoofdinhoud">‚Üí Hoofdinhoud</a></li>
    <li><a href="#veelgestelde-vragen">‚Üí Veelgestelde Vragen</a></li>
    <li><a href="#reacties">‚Üí Reacties</a></li>
    <li><a href="#trefwoorden">‚Üí Trefwoorden</a></li>
  </ul>
</nav>

<h2 id="locatie-en-tijd">üìç Locatie en Tijd</h2>
<p><strong>Locatie:</strong> Rotterdam | <strong>Datum:</strong> 2025-10-09 15:20:45</p>

<h2 id="hoofdinhoud">Samenvatting</h2>
<p>Politie Rotterdam heeft vandaag een 32-jarige man aangehouden na een gewapende overval...</p>

<p>De verdachte werd kort na de overval in de wijk Kralingen aangehouden...</p>
<h3>Onderzoek loopt</h3>
<p>Het onderzoek naar de overval is nog in volle gang...</p>

<h2 id="veelgestelde-vragen">‚ùì Veelgestelde Vragen</h2>
<h3 id="faq-wat-gebeurde-er-precies">Wat gebeurde er precies?</h3>
<p>Een gewapende overval vond plaats in Rotterdam waarbij √©√©n persoon is aangehouden.</p>

<h3 id="faq-waar-vond-dit-plaats">Waar vond dit plaats?</h3>
<p>Het incident vond plaats in de wijk Kralingen in Rotterdam.</p>

<h3 id="faq-wat-zijn-de-gevolgen">Wat zijn de gevolgen?</h3>
<p>De verdachte is aangehouden en het onderzoek loopt nog.</p>

<h2 id="reacties">üí¨ Reacties</h2>
<p><em>Reacties worden hieronder geladen...</em></p>

<h3 id="trefwoorden">üè∑Ô∏è Trefwoorden</h3>
<ul>
  <li><a href="/tags/politie">Politie</a></li>
  <li><a href="/tags/rotterdam">Rotterdam</a></li>
  <li><a href="/tags/overval">Overval</a></li>
  <li><a href="/tags/kralingen">Kralingen</a></li>
</ul>

<h3 id="categorie">üìÇ Categorie</h3>
<p><a href="/categorie/misdaad">Misdaad</a></p>
```

## Next.js Integration

### ArticleClient Component

The `ArticleClient.tsx` component receives the semantic HTML and renders it:

```tsx
<article className="prose dark:prose-invert max-w-none">
  <h1>{article.title}</h1>  {/* Title added by Next.js */}

  {/* Semantic HTML from Firestore */}
  <div dangerouslySetInnerHTML={{ __html: article.full_text }} />

  {/* CommentThread component replaces placeholder */}
  <CommentThread articleSlug={article.slug} />
</article>
```

### CSS Styling

Tailwind's `prose` class handles spacing:
- `prose-h2:mt-8 prose-h2:mb-4` - Section headers get proper spacing
- `prose-h3:mt-6 prose-h3:mb-3` - Subsections get smaller spacing
- `prose-p:my-4` - Paragraphs get comfortable reading space
- `prose-ul:my-6` - Lists get appropriate margins

## Testing & Validation

### Google Rich Results Test
1. Visit: https://search.google.com/test/rich-results
2. Enter article URL: `https://politie-forum.nl/nieuws/{slug}`
3. Verify schemas detected:
   - ‚úÖ NewsArticle
   - ‚úÖ FAQPage
   - ‚úÖ DiscussionForumPosting
   - ‚úÖ Place + GeoCoordinates
   - ‚úÖ BreadcrumbList

### HTML Validation
1. Visit: https://validator.w3.org/
2. Check for:
   - ‚úÖ One `<h1>` per page
   - ‚úÖ Logical heading hierarchy (no skipped levels)
   - ‚úÖ Valid anchor IDs (no spaces or special chars)
   - ‚úÖ Proper ARIA attributes

### Accessibility Check
1. Use Lighthouse in Chrome DevTools
2. Target score: **95+** in Accessibility category
3. Verify:
   - ‚úÖ Heading order is correct
   - ‚úÖ Links have descriptive text
   - ‚úÖ ARIA labels present where needed

## Future Enhancements

### Phase 2 (Planned)
- [ ] Add `ScrollToAction` to JSON-LD with fragment identifiers
- [ ] Generate anchor icons next to headings (¬ß symbol)
- [ ] Add "Back to top" button after each major section
- [ ] Implement table of contents auto-generation
- [ ] Add "Copy link to section" functionality

### Phase 3 (Planned)
- [ ] Related articles section before comments
- [ ] Timeline visualization for event articles
- [ ] Map embed for location section (Google Maps API)
- [ ] Author bio section for human-written articles

## Documentation References

- [ADVANCED-SCHEMA-IMPLEMENTATION.md](./ADVANCED-SCHEMA-IMPLEMENTATION.md) - JSON-LD schemas
- [ADVANCED-COMMENT-SYSTEM.md](./ADVANCED-COMMENT-SYSTEM.md) - Comment integration
- [FAQ-IMPLEMENTATION.md](./FAQ-IMPLEMENTATION.md) - FAQ generation logic

---

**Status:** ‚úÖ Active (Menu 16)
**Last Updated:** October 9, 2025
**Version:** 2.0
